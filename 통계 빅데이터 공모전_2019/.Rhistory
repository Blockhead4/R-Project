}
review <- c()
for(i in 1:length(pages)) {
url_all <- paste0(ifr_base_url, i)
html <- read_html(url_all)
html %>%
html_node('div.score_result') %>%
html_nodes('li') -> lis
score <- c()
writer <- c()
time <- c()
for (li in lis) {
score <- c(score, html_node(li, '.star_score') %>% html_text('em') %>% trim())
li %>%
html_node('.score_reple') %>%
html_text('p') %>%
trim() -> tmp
idx <- str_locate(tmp, "\r")
review <- c(review, str_sub(tmp, 1, idx[1]-1))
tmp <- trim(str_sub(tmp, idx[1], -1))
idx <- str_locate(tmp, "\r")
writer <- c(writer, str_sub(tmp, 1, idx[1]-1))
tmp <- trim(str_sub(tmp, idx[1], -1))
idx <- str_locate(tmp, "\r")
time <- c(time, str_sub(tmp, 1, idx[1]-1))
#print(time)
}
result <- data.frame(score=score, review=review, writer=writer, time=time)
review <- rbind.data.frame(review, result)
}
url_all <- paste0(ifr_base_url, 1)
html <- read_html(url_all)
html %>%
html_node('div.score_result') %>%
html_nodes('li') -> lis
score <- c()
writer <- c()
time <- c()
for (li in lis) {
score <- c(score, html_node(li, '.star_score') %>% html_text('em') %>% trim())
li %>%
html_node('.score_reple') %>%
html_text('p') %>%
trim() -> tmp
idx <- str_locate(tmp, "\r")
review <- c(review, str_sub(tmp, 1, idx[1]-1))
tmp <- trim(str_sub(tmp, idx[1], -1))
idx <- str_locate(tmp, "\r")
writer <- c(writer, str_sub(tmp, 1, idx[1]-1))
tmp <- trim(str_sub(tmp, idx[1], -1))
idx <- str_locate(tmp, "\r")
time <- c(time, str_sub(tmp, 1, idx[1]-1))
#print(time)
}
result <- data.frame(score=score, review=review, writer=writer, time=time)
reviews <- c()
reviews <- c()
url_all <- paste0(ifr_base_url, 1)
html <- read_html(url_all)
html %>%
html_node('div.score_result') %>%
html_nodes('li') -> lis
score <- c()
writer <- c()
review <- c()
time <- c()
for (li in lis) {
score <- c(score, html_node(li, '.star_score') %>% html_text('em') %>% trim())
li %>%
html_node('.score_reple') %>%
html_text('p') %>%
trim() -> tmp
idx <- str_locate(tmp, "\r")
review <- c(review, str_sub(tmp, 1, idx[1]-1))
tmp <- trim(str_sub(tmp, idx[1], -1))
idx <- str_locate(tmp, "\r")
writer <- c(writer, str_sub(tmp, 1, idx[1]-1))
tmp <- trim(str_sub(tmp, idx[1], -1))
idx <- str_locate(tmp, "\r")
time <- c(time, str_sub(tmp, 1, idx[1]-1))
#print(time)
}
result <- data.frame(score=score, review=review, writer=writer, time=time)
reviews <- rbind.data.frame(reviews, result)
review
result
reviews <- rbind(reviews, result)
reviews
reviews <- c()
for(i in 1:length(pages)) {
url_all <- paste0(ifr_base_url, pages[i])
html <- read_html(url_all)
html %>%
html_node('div.score_result') %>%
html_nodes('li') -> lis
score <- c()
writer <- c()
review <- c()
time <- c()
for (li in lis) {
score <- c(score, html_node(li, '.star_score') %>% html_text('em') %>% trim())
li %>%
html_node('.score_reple') %>%
html_text('p') %>%
trim() -> tmp
idx <- str_locate(tmp, "\r")
review <- c(review, str_sub(tmp, 1, idx[1]-1))
tmp <- trim(str_sub(tmp, idx[1], -1))
idx <- str_locate(tmp, "\r")
writer <- c(writer, str_sub(tmp, 1, idx[1]-1))
tmp <- trim(str_sub(tmp, idx[1], -1))
idx <- str_locate(tmp, "\r")
time <- c(time, str_sub(tmp, 1, idx[1]-1))
#print(time)
}
result <- data.frame(score=score, review=review, writer=writer, time=time)
reviews <- rbind.data.frame(reviews, result)
}
reviews
url <- 'https://front.wemakeprice.com/deal/600089247?source=dealsearch&search_keyword=%EA%B7%B8%EB%9E%A8&_service=5&no&extservice=ad'
html <- read_html
html <- read_html(url)
html
a <- html_node(html, 'div.review_area')
a
a <- html_nodes(html, 'div.review_area')
a
a <- html_nodes(html, '.tab_conts')
a
a <- html_node(html, '.tab_conts')
a
a <- html_nodes(html, '.review_area')
a
a <- html_node(html, '.review_area')
a <- html_node(html, '.tab_conts')
a <- html_node(html, '.review_area')
a
a <- html_node(html, '.desc_cont')
a
a <- html_node(html, '.tab_conts')
a <- html_node(html, '.desc_cont')
a
a <- html_nodes(html, '.review_area')
a
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
ifr_base_url <- 'https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=173123&type=after&isActualPointWriteExecute=false&isMileageSubscriptionAlready=false&isMileageSubscriptionReject=false&page='
pages <- c(1:242)
reviews <- c()
for(i in 1:length(pages)) {
url_all <- paste0(ifr_base_url, pages[i])
html <- read_html(url_all)
html %>%
html_node('div.score_result') %>%
html_nodes('li') -> lis
score <- c()
writer <- c()
review <- c()
time <- c()
for (li in lis) {
score <- c(score, html_node(li, '.star_score') %>% html_text('em') %>% trim())
li %>%
html_node('.score_reple') %>%
html_text('p') %>%
trim() -> tmp
idx <- str_locate(tmp, "\r")
review <- c(review, str_sub(tmp, 1, idx[1]-1))
tmp <- trim(str_sub(tmp, idx[1], -1))
idx <- str_locate(tmp, "\r")
writer <- c(writer, str_sub(tmp, 1, idx[1]-1))
tmp <- trim(str_sub(tmp, idx[1], -1))
idx <- str_locate(tmp, "\r")
time <- c(time, str_sub(tmp, 1, idx[1]-1))
#print(time)
}
result <- data.frame(score=score, review=review, writer=writer, time=time)
reviews <- rbind.data.frame(reviews, result)
}
library(xlsx)
write.xlsx(reviews, "D:/workspace-Jwp/R/R-Project/01_Crowling/reviews.xlsx")
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(KoNLP)
library(wordcloud)
library(RColorBrewer)
library(ggplot2)
library(KoNLP)
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(wordcloud)
library(RColorBrewer)
library(ggplot2)
library(KoNLP)
install.packages("KoNLP")
library(KoNLP)
install.packages("KoNLP")
library(rJava)
library(KoNLP)
library(rJava)
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(wordcloud)
library(RColorBrewer)
library(ggplot2)
library(KoNLP)
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(wordcloud)
library(RColorBrewer)
library(ggplot2)
library(KoNLP)
useSejongDic()
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jdk1.8.0_202")
library(rJava)
library(KoNLP)
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jdk1.8.0_202/")
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(wordcloud)
library(RColorBrewer)
library(ggplot2)
library(KoNLP)
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jdk1.8.0_202/")
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(wordcloud)
library(RColorBrewer)
library(ggplot2)
library(KoNLP)
library(rJava)
library(KoNLP)
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jre1.8.0_211")
library(rJava)
library(KoNLP)
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jre1.8.0_211")
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(KoNLP)
library(wordcloud)
library(RColorBrewer)
library(ggplot2)
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jre1.8.0_211/")
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(KoNLP)
library(wordcloud)
library(RColorBrewer)
library(ggplot2)
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jdk1.8.0_211/")
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(KoNLP)
library(wordcloud)
library(RColorBrewer)
library(ggplot2)
useSejongDic()
install.packages("rJava")
install.packages("rJava")
library(rJava)
library(rJava)
install.packages("rJava")
# NAVER 영화 ('스파이더맨 : 파프롬 홈') 일반인 리뷰 크롤링
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jdk1.8.0_211/")
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(KoNLP)
library(wordcloud)
library(RColorBrewer)
library(ggplot2)
install.packages("rJava")
install.packages("rJava")
library(rJava)
library(rJava)
library(rJava)
# NAVER 영화 [ 스파이더맨 : 파프롬 홈 ] 일반인 리뷰 크롤링
library(rvest)
library(stringr)
library(dplyr)
library(xlsx)
library(rJava)
library(KoNLP)
library(rJava)
library(KoNLP)
# NAVER 영화 [ 스파이더맨 : 파프롬 홈 ] 일반인 리뷰 크롤링
install.packages("rJava")
install.packages("rJava")
library(rJava)
library(KoNLP)
a <- data.frame(c(1:100), c(rep('a', 'b', 50)))
a
a <- data.frame(c(1:100), c(rep('a', 'b', each=50)))
?rep
a <- data.frame(c(1:100), c(rep('a', 'b', each=T)))
rep(1, 2)
a <- data.frame(c(1:100), rep(c('a', 'b'), each=50)))
rep(c(1, 2), 3)
rep(c(1, 2), each=T)
rep(c(1, 2), 30, each=T)
rep(c(1, 2, 2), 30, each=T)
rep(c(1, 2, 2), 30)
rep(c('a','b'), each=2)
rep(c('a','b'), 2)
a <- data.frame(c(1:100), rep(c('a', 'b'), 50)))
a <- data.frame(c(1:100), rep(c('a', 'b'), 100)))
a <- data.frame(c(1:100), rep(c('a', 'b'), 100))
aa
a
a <- data.frame(c(1:100), rep(c('a', 'b'), 50)
a <- data.frame(c(1:100), rep(c('a', 'b'), 50))
?rep
a
b <- data.frame(rep(c('a', 'b'), 50), rep(c('123214', '898908'), 50))
b
?merge
library(rJava)
library(dplyr)
library(ggplot2)
library(RColorBrewer)
setwd("D:/workspace-Jwp/R/R-Project/통계 빅데이터 공모전_2019")
options(digits=2)
# 18년도 자치구별 0~2세 인구 분포
data15 <- read.csv("data/서울시_주민등록인구_2015.txt", header=T, sep="\t")
sdata <- data15 %>%
filter(행정동 != c('합계', '소계'))
sdata2 <- sdata[, c(1:8)]
head(sdata2)
sdata2$합계 <- as.numeric(sdata2$합계)
sdata2$X0세 <- as.numeric(sdata2$X0세)
sdata2$X1세 <- as.numeric(sdata2$X1세)
sdata2$X2세 <- as.numeric(sdata2$X2세)
sdata2$X3세 <- as.numeric(sdata2$X3세)
str(sdata2)
sdata2 <- sdata2 %>%
group_by(자치구) %>%
summarise_each(funs(mean), X0세, X1세, X2세, X3세) %>%
arrange(desc(X0세, X1세, X2세, X3세))
sdata2
sdata3 <- sdata2 %>%
mutate("영세아" = X0세+X1세+X2세+X3세) %>%
arrange(desc(영세아))
sdata3
sdata2
# 동별 분포
pdata <- sdata[, c(1:8)]
pdata2 <- pdata %>%
group_by(행정동) %>%
summarise_each(funs(mean), X0세, X1세, X2세, X3세) %>%
arrange(desc(X0세, X1세, X2세, X3세))
pdata2
# 18년도 자치구별 0~2세 인구 분포
data15 <- read.csv("data/서울시_주민등록인구_2015.txt", header=T, sep="\t")
sdata <- data15 %>%
filter(행정동 != c('합계', '소계'))
sdata2 <- sdata[, c(1:8)]
head(sdata2)
sdata2$합계 <- as.numeric(sdata2$합계)
sdata2$X0세 <- as.numeric(sdata2$X0세)
sdata2$X1세 <- as.numeric(sdata2$X1세)
sdata2$X2세 <- as.numeric(sdata2$X2세)
sdata2$X3세 <- as.numeric(sdata2$X3세)
str(sdata2)
# 동별 분포
pdata <- sdata2 %>%
group_by(행정동) %>%
summarise_each(funs(mean), X0세, X1세, X2세, X3세) %>%
arrange(desc(X0세, X1세, X2세, X3세))
pdata
# 동별 분포
pdata <- sdata2 %>%
group_by(자치구, 행정동) %>%
summarise_each(funs(mean), X0세, X1세, X2세, X3세) %>%
arrange(desc(X0세, X1세, X2세, X3세))
pdata
# 동별 분포
pdata <- sdata2 %>%
group_by(자치구, 행정동) %>%
summarise_each(funs(mean), X0세, X1세, X2세, X3세) %>%
arrange(desc(자치구, 행정동, X0세, X1세, X2세, X3세))
pdata
# 동별 분포
pdata <- sdata2 %>%
group_by(자치구, 행정동) %>%
summarise_each(funs(mean), X0세, X1세, X2세, X3세) %>%
arrange(자치구, 행정동, desc(X0세, X1세, X2세, X3세))
pdata
gu_all <- sdata2 %>%
mutate("영세아" = X0세+X1세+X2세+X3세) %>%
arrange(desc(영세아))
gu_all
sdata <- data15 %>%
filter(행정동 != c('합계', '소계'))
sdata2 <- sdata[, c(1:8)]
head(sdata2)
sdata2$합계 <- as.numeric(sdata2$합계)
sdata2$X0세 <- as.numeric(sdata2$X0세)
sdata2$X1세 <- as.numeric(sdata2$X1세)
sdata2$X2세 <- as.numeric(sdata2$X2세)
sdata2$X3세 <- as.numeric(sdata2$X3세)
str(sdata2)
gu <- sdata2 %>%
group_by(자치구) %>%
summarise_each(funs(mean), X0세, X1세, X2세, X3세) %>%
arrange(desc(X0세, X1세, X2세, X3세))
gu
gu_all <- sdata2 %>%
mutate("영세아" = X0세+X1세+X2세+X3세) %>%
arrange(desc(영세아))
gu_all
gu_all <- gu %>%
mutate("영세아" = X0세+X1세+X2세+X3세) %>%
arrange(desc(영세아))
gu_all
# 동별 분포
dong <- sdata2 %>%
group_by(자치구, 행정동) %>%
summarise_each(funs(mean), X0세, X1세, X2세, X3세) %>%
arrange(자치구, 행정동, desc(X0세, X1세, X2세, X3세))
dong
dong_all <- dong %>%
mutate("영세아" = X0세+X1세+X2세+X3세) %>%
arrange(desc(영세아))
gu_all
dong_all
setwd("D:/workspace-Jwp/R/R-Project/통계 빅데이터 공모전_2019")
options(digits=2)
# 18년도 자치구별 0~2세 인구 분포
data <- read.csv("data/서울시_주민등록인구_2018.txt", header=T, sep="\t")
sdata <- data %>%
filter(행정동 != c('합계', '소계'))
sdata2 <- sdata[, c(1:8)]
head(sdata2)
sdata2$합계 <- as.numeric(sdata2$합계)
sdata2$X0세 <- as.numeric(sdata2$X0세)
sdata2$X1세 <- as.numeric(sdata2$X1세)
sdata2$X2세 <- as.numeric(sdata2$X2세)
sdata2$X3세 <- as.numeric(sdata2$X3세)
str(sdata2)
gu <- sdata2 %>%
group_by(자치구) %>%
summarise_each(funs(mean), X0세, X1세, X2세, X3세) %>%
arrange(desc(X0세, X1세, X2세, X3세))
gu
gu_all <- gu %>%
mutate("영세아" = X0세+X1세+X2세+X3세) %>%
arrange(desc(영세아))
gu_all
#head(sdata2)
head(sdata3)
# 동별 분포
dong <- sdata2 %>%
group_by(자치구, 행정동) %>%
summarise_each(funs(mean), X0세, X1세, X2세, X3세) %>%
arrange(자치구, 행정동, desc(X0세, X1세, X2세, X3세))
dong
dong_all <- dong %>%
mutate("영세아" = X0세+X1세+X2세+X3세) %>%
arrange(desc(영세아))
dong_all
ggplot(dong, aes(자치구, X0세, fill=자치구)) +  geom_col()
ggplot(dong_all, aes(자치구, 영세아, fill=자치구)) +  geom_col()
ggplot(dong, aes(행정동, X0세, fill=행정동)) +  geom_col()
ggplot(dong, aes(행정동, X0세)) +  geom_col(color='red')
ggplot(dong_all, aes(행정동, 영세아)) +  geom_col(color='red')
dong_all
ggplot(dong, aes(행정동, X0세)) +  geom_col(color='red')
View(dong)
View(dong_all)
ggplot(dong_all, aes(행정동, 영세아)) +  geom_col(color='red')
dong_all
summary(dong_all)
ggplot(dong, aes(행정동, X0세)) +  geom_col(color='red', xlim=c(0,1000))
ggplot(dong_all, aes(행정동, 영세아)) +  geom_col(color='red', xlim=c(0,1000))
ggplot(dong_all, aes(행정동, 영세아)) +  geom_col(color='red')
